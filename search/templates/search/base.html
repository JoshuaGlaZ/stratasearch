{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StrataSearch</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    
    <link rel="stylesheet" href="{% static 'search/css/styles.css' %}">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        obsidian: '#09090b',
                        charcoal: '#18181b',
                        steel: '#27272a',
                        emerald: {
                            400: '#34d399',
                            500: '#10b981',
                            600: '#059669',
                            900: '#064e3b',
                        }
                    },
                    animation: {
                        'fade-in-up': 'fadeInUp 0.3s ease-out forwards',
                    },
                    keyframes: {
                        fadeInUp: {
                            '0%': { opacity: '0', transform: 'translateY(10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-obsidian text-gray-300 font-sans h-screen flex flex-col overflow-hidden selection:bg-emerald-500/20 selection:text-white antialiased">
    
    <div class="fixed inset-0 z-0 pointer-events-none opacity-20">
        <div class="absolute top-0 left-0 w-full h-full bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-emerald-900/20 via-obsidian to-obsidian"></div>
    </div>

    <div class="relative z-10 h-full flex flex-col">
        {% block content %}{% endblock %}
    </div>

    <div id="toast-container" class="fixed top-4 right-4 z-50 space-y-2"></div>

    <script>
        function showToast(message, type = 'info') {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            
            // Emerald themed toasts
            const styles = {
                'success': 'bg-charcoal border border-emerald-500/30 text-emerald-400',
                'error': 'bg-charcoal border border-red-500/30 text-red-400',
                'info': 'bg-charcoal border border-white/10 text-gray-300',
            };
            
            toast.className = `flex items-center gap-3 px-4 py-3 rounded-lg shadow-xl backdrop-blur-md ${styles[type]}`;
            toast.innerHTML = `
                <span class="text-sm font-medium">${message}</span>
                <button onclick="this.parentElement.remove()" class="text-gray-500 hover:text-white ml-2">
                    <i class="fa-solid fa-times text-xs"></i>
                </button>
            `;
            
            container.appendChild(toast);
            setTimeout(() => {
                toast.style.opacity = '0';
                setTimeout(() => toast.remove(), 300);
            }, 4000);
        }

        // Global Copy Function
        function copyToClipboard(button) {
            const container = button.closest('.w-full'); 
            const content = container.querySelector('.markdown-body');
            if (!content) return;

            navigator.clipboard.writeText(content.innerText).then(() => {
                const icon = button.querySelector('i');
                icon.classList.remove('fa-regular', 'fa-copy');
                icon.classList.add('fa-solid', 'fa-check', 'text-emerald-400');
                
                setTimeout(() => {
                    icon.classList.remove('fa-solid', 'fa-check', 'text-emerald-400');
                    icon.classList.add('fa-regular', 'fa-copy');
                }, 2000);
                
                showToast('Copied to clipboard', 'success');
            }).catch(err => {
                console.error('Failed to copy: ', err);
                showToast('Failed to copy text', 'error');
            });
        }
    </script>
</body>
</html>